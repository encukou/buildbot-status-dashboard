<div class="container release_status">
    <div style="text-align: center;">
        <h1>Python Branch Status Dashboard</h1>
    </div>

    <h2>Failing stable builders</h2>

    {% for branch, info_by_tier, branch_status in failed_builders %}
        <section class="branch-status status-{{ branch_status }}">
            <h3>
                {{ branch }}:
                {% if branch_status == "ok" %}
                    Releasable
                {% elif branch_status == "concern" %}
                    Concern
                {% elif branch_status == "bad" %}
                    Unreleasable
                {% else %}
                    Unknown?!
                {% endif %}
            </h3>
            {% for tier, info in info_by_tier %}
                <section>
                    <h4 class="tier-name">{{ tier }}</h4>
                    {% for builder, build in info %}
                        <section>
                            <h5>
                                <a href="#/builders/{{build.builderid}}/builds/{{build.number}}">
                                    {{ builder.name -}}
                                </a>: #{{ build.number }}
                            </h5>
                        </section>
                    {% endfor %}
                </section>
            {% endfor %}
        </section>
    {% endfor %}

    {% if disconnected_workers %}
        <section>
            <h2>Disconnected stable workers</h2>

            {% for name, worker in disconnected_workers %}
                <div>
                    -
                    <a href="#/workers/{{ worker.workerid }}">
                        {{ name }}
                    </a>
                </div>
            {% endfor %}
        </section>
    {% endif %}

    <div class="container">
        <small>Generated at <time id="generatedAt" datetime="{{generated_at}}">{{generated_at}}</time></small>
    </div>
</div>
<script>
    let elem = document.getElementById("generatedAt");
    let date = new Date(elem.dateTime);
    elem.innerText = date.toLocaleDateString("en-CA") + " " + date.toLocaleTimeString("pl-PL");
</script>
